{"id":"../node_modules/bootstrap-vue/esm/components/form-datepicker/form-datepicker.js","dependencies":[{"name":"/data/uibuilder/navbar/package.json","includedInParent":true,"mtime":1654946937447},{"name":"/data/uibuilder/navbar/node_modules/bootstrap-vue/package.json","includedInParent":true,"mtime":1651564048996},{"name":"../../vue","loc":{"line":9,"column":20,"index":1123},"parent":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/components/form-datepicker/form-datepicker.js","resolved":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/vue.js"},{"name":"../../constants/components","loc":{"line":10,"column":37,"index":1173},"parent":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/components/form-datepicker/form-datepicker.js","resolved":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/constants/components.js"},{"name":"../../constants/events","loc":{"line":11,"column":72,"index":1275},"parent":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/components/form-datepicker/form-datepicker.js","resolved":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/constants/events.js"},{"name":"../../constants/props","loc":{"line":12,"column":75,"index":1376},"parent":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/components/form-datepicker/form-datepicker.js","resolved":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/constants/props.js"},{"name":"../../constants/slots","loc":{"line":13,"column":41,"index":1442},"parent":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/components/form-datepicker/form-datepicker.js","resolved":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/constants/slots.js"},{"name":"../../utils/date","loc":{"line":14,"column":63,"index":1530},"parent":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/components/form-datepicker/form-datepicker.js","resolved":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/utils/date.js"},{"name":"../../utils/dom","loc":{"line":15,"column":42,"index":1592},"parent":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/components/form-datepicker/form-datepicker.js","resolved":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/utils/dom.js"},{"name":"../../utils/inspect","loc":{"line":16,"column":34,"index":1645},"parent":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/components/form-datepicker/form-datepicker.js","resolved":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/utils/inspect.js"},{"name":"../../utils/model","loc":{"line":17,"column":31,"index":1699},"parent":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/components/form-datepicker/form-datepicker.js","resolved":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/utils/model.js"},{"name":"../../utils/object","loc":{"line":18,"column":37,"index":1757},"parent":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/components/form-datepicker/form-datepicker.js","resolved":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/utils/object.js"},{"name":"../../utils/props","loc":{"line":19,"column":60,"index":1839},"parent":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/components/form-datepicker/form-datepicker.js","resolved":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/utils/props.js"},{"name":"../../mixins/id","loc":{"line":20,"column":42,"index":1902},"parent":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/components/form-datepicker/form-datepicker.js","resolved":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/mixins/id.js"},{"name":"../../icons/icons","loc":{"line":21,"column":49,"index":1970},"parent":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/components/form-datepicker/form-datepicker.js","resolved":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/icons/icons.js"},{"name":"../button/button","loc":{"line":22,"column":24,"index":2015},"parent":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/components/form-datepicker/form-datepicker.js","resolved":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/components/button/button.js"},{"name":"../calendar/calendar","loc":{"line":23,"column":51,"index":2086},"parent":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/components/form-datepicker/form-datepicker.js","resolved":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/components/calendar/calendar.js"},{"name":"../form-btn-label-control/bv-form-btn-label-control","loc":{"line":24,"column":75,"index":2185},"parent":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/components/form-datepicker/form-datepicker.js","resolved":"/data/uibuilder/navbar/node_modules/bootstrap-vue/esm/components/form-btn-label-control/bv-form-btn-label-control.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.props = exports.BFormDatepicker = void 0;\n\nvar _vue = require(\"../../vue\");\n\nvar _components = require(\"../../constants/components\");\n\nvar _events = require(\"../../constants/events\");\n\nvar _props = require(\"../../constants/props\");\n\nvar _slots = require(\"../../constants/slots\");\n\nvar _date = require(\"../../utils/date\");\n\nvar _dom = require(\"../../utils/dom\");\n\nvar _inspect = require(\"../../utils/inspect\");\n\nvar _model = require(\"../../utils/model\");\n\nvar _object = require(\"../../utils/object\");\n\nvar _props2 = require(\"../../utils/props\");\n\nvar _id = require(\"../../mixins/id\");\n\nvar _icons = require(\"../../icons/icons\");\n\nvar _button = require(\"../button/button\");\n\nvar _calendar = require(\"../calendar/calendar\");\n\nvar _bvFormBtnLabelControl = require(\"../form-btn-label-control/bv-form-btn-label-control\");\n\nvar _watch;\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\n// --- Constants ---\nvar _makeModelMixin = (0, _model.makeModelMixin)('value', {\n  type: _props.PROP_TYPE_DATE_STRING\n}),\n    modelMixin = _makeModelMixin.mixin,\n    modelProps = _makeModelMixin.props,\n    MODEL_PROP_NAME = _makeModelMixin.prop,\n    MODEL_EVENT_NAME = _makeModelMixin.event; // --- Props ---\n\n\nvar calendarProps = (0, _object.omit)(_calendar.props, ['block', 'hidden', 'id', 'noKeyNav', 'roleDescription', 'value', 'width']);\nvar formBtnLabelControlProps = (0, _object.omit)(_bvFormBtnLabelControl.props, ['formattedValue', 'id', 'lang', 'rtl', 'value']);\nvar props = (0, _props2.makePropsConfigurable)((0, _object.sortKeys)(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, _id.props), modelProps), calendarProps), formBtnLabelControlProps), {}, {\n  // Width of the calendar dropdown\n  calendarWidth: (0, _props2.makeProp)(_props.PROP_TYPE_STRING, '270px'),\n  closeButton: (0, _props2.makeProp)(_props.PROP_TYPE_BOOLEAN, false),\n  closeButtonVariant: (0, _props2.makeProp)(_props.PROP_TYPE_STRING, 'outline-secondary'),\n  // Dark mode\n  dark: (0, _props2.makeProp)(_props.PROP_TYPE_BOOLEAN, false),\n  labelCloseButton: (0, _props2.makeProp)(_props.PROP_TYPE_STRING, 'Close'),\n  labelResetButton: (0, _props2.makeProp)(_props.PROP_TYPE_STRING, 'Reset'),\n  labelTodayButton: (0, _props2.makeProp)(_props.PROP_TYPE_STRING, 'Select today'),\n  noCloseOnSelect: (0, _props2.makeProp)(_props.PROP_TYPE_BOOLEAN, false),\n  resetButton: (0, _props2.makeProp)(_props.PROP_TYPE_BOOLEAN, false),\n  resetButtonVariant: (0, _props2.makeProp)(_props.PROP_TYPE_STRING, 'outline-danger'),\n  resetValue: (0, _props2.makeProp)(_props.PROP_TYPE_DATE_STRING),\n  todayButton: (0, _props2.makeProp)(_props.PROP_TYPE_BOOLEAN, false),\n  todayButtonVariant: (0, _props2.makeProp)(_props.PROP_TYPE_STRING, 'outline-primary')\n})), _components.NAME_FORM_DATEPICKER); // --- Main component ---\n// @vue/component\n\nexports.props = props;\n\nvar BFormDatepicker = /*#__PURE__*/_vue.Vue.extend({\n  name: _components.NAME_FORM_DATEPICKER,\n  mixins: [_id.idMixin, modelMixin],\n  props: props,\n  data: function data() {\n    return {\n      // We always use `YYYY-MM-DD` value internally\n      localYMD: (0, _date.formatYMD)(this[MODEL_PROP_NAME]) || '',\n      // If the popup is open\n      isVisible: false,\n      // Context data from BCalendar\n      localLocale: null,\n      isRTL: false,\n      formattedValue: '',\n      activeYMD: ''\n    };\n  },\n  computed: {\n    calendarYM: function calendarYM() {\n      // Returns the calendar year/month\n      // Returns the `YYYY-MM` portion of the active calendar date\n      return this.activeYMD.slice(0, -3);\n    },\n    computedLang: function computedLang() {\n      return (this.localLocale || '').replace(/-u-.*$/i, '') || null;\n    },\n    computedResetValue: function computedResetValue() {\n      return (0, _date.formatYMD)((0, _date.constrainDate)(this.resetValue)) || '';\n    }\n  },\n  watch: (_watch = {}, _defineProperty(_watch, MODEL_PROP_NAME, function (newValue) {\n    this.localYMD = (0, _date.formatYMD)(newValue) || '';\n  }), _defineProperty(_watch, \"localYMD\", function localYMD(newValue) {\n    // We only update the v-model when the datepicker is open\n    if (this.isVisible) {\n      this.$emit(MODEL_EVENT_NAME, this.valueAsDate ? (0, _date.parseYMD)(newValue) || null : newValue || '');\n    }\n  }), _defineProperty(_watch, \"calendarYM\", function calendarYM(newValue, oldValue) {\n    // Displayed calendar month has changed\n    // So possibly the calendar height has changed...\n    // We need to update popper computed position\n    if (newValue !== oldValue && oldValue) {\n      try {\n        this.$refs.control.updatePopper();\n      } catch (_unused) {}\n    }\n  }), _watch),\n  methods: {\n    // Public methods\n    focus: function focus() {\n      if (!this.disabled) {\n        (0, _dom.attemptFocus)(this.$refs.control);\n      }\n    },\n    blur: function blur() {\n      if (!this.disabled) {\n        (0, _dom.attemptBlur)(this.$refs.control);\n      }\n    },\n    // Private methods\n    setAndClose: function setAndClose(ymd) {\n      var _this = this;\n\n      this.localYMD = ymd; // Close calendar popup, unless `noCloseOnSelect`\n\n      if (!this.noCloseOnSelect) {\n        this.$nextTick(function () {\n          _this.$refs.control.hide(true);\n        });\n      }\n    },\n    onSelected: function onSelected(ymd) {\n      var _this2 = this;\n\n      this.$nextTick(function () {\n        _this2.setAndClose(ymd);\n      });\n    },\n    onInput: function onInput(ymd) {\n      if (this.localYMD !== ymd) {\n        this.localYMD = ymd;\n      }\n    },\n    onContext: function onContext(ctx) {\n      var activeYMD = ctx.activeYMD,\n          isRTL = ctx.isRTL,\n          locale = ctx.locale,\n          selectedYMD = ctx.selectedYMD,\n          selectedFormatted = ctx.selectedFormatted;\n      this.isRTL = isRTL;\n      this.localLocale = locale;\n      this.formattedValue = selectedFormatted;\n      this.localYMD = selectedYMD;\n      this.activeYMD = activeYMD; // Re-emit the context event\n\n      this.$emit(_events.EVENT_NAME_CONTEXT, ctx);\n    },\n    onTodayButton: function onTodayButton() {\n      // Set to today (or min/max if today is out of range)\n      this.setAndClose((0, _date.formatYMD)((0, _date.constrainDate)((0, _date.createDate)(), this.min, this.max)));\n    },\n    onResetButton: function onResetButton() {\n      this.setAndClose(this.computedResetValue);\n    },\n    onCloseButton: function onCloseButton() {\n      this.$refs.control.hide(true);\n    },\n    // Menu handlers\n    onShow: function onShow() {\n      this.isVisible = true;\n    },\n    onShown: function onShown() {\n      var _this3 = this;\n\n      this.$nextTick(function () {\n        (0, _dom.attemptFocus)(_this3.$refs.calendar);\n\n        _this3.$emit(_events.EVENT_NAME_SHOWN);\n      });\n    },\n    onHidden: function onHidden() {\n      this.isVisible = false;\n      this.$emit(_events.EVENT_NAME_HIDDEN);\n    },\n    // Render helpers\n    defaultButtonFn: function defaultButtonFn(_ref) {\n      var isHovered = _ref.isHovered,\n          hasFocus = _ref.hasFocus;\n      return this.$createElement(isHovered || hasFocus ? _icons.BIconCalendarFill : _icons.BIconCalendar, {\n        attrs: {\n          'aria-hidden': 'true'\n        }\n      });\n    }\n  },\n  render: function render(h) {\n    var localYMD = this.localYMD,\n        disabled = this.disabled,\n        readonly = this.readonly,\n        dark = this.dark,\n        $props = this.$props,\n        $scopedSlots = this.$scopedSlots;\n    var placeholder = (0, _inspect.isUndefinedOrNull)(this.placeholder) ? this.labelNoDateSelected : this.placeholder; // Optional footer buttons\n\n    var $footer = [];\n\n    if (this.todayButton) {\n      var label = this.labelTodayButton;\n      $footer.push(h(_button.BButton, {\n        props: {\n          disabled: disabled || readonly,\n          size: 'sm',\n          variant: this.todayButtonVariant\n        },\n        attrs: {\n          'aria-label': label || null\n        },\n        on: {\n          click: this.onTodayButton\n        }\n      }, label));\n    }\n\n    if (this.resetButton) {\n      var _label = this.labelResetButton;\n      $footer.push(h(_button.BButton, {\n        props: {\n          disabled: disabled || readonly,\n          size: 'sm',\n          variant: this.resetButtonVariant\n        },\n        attrs: {\n          'aria-label': _label || null\n        },\n        on: {\n          click: this.onResetButton\n        }\n      }, _label));\n    }\n\n    if (this.closeButton) {\n      var _label2 = this.labelCloseButton;\n      $footer.push(h(_button.BButton, {\n        props: {\n          disabled: disabled,\n          size: 'sm',\n          variant: this.closeButtonVariant\n        },\n        attrs: {\n          'aria-label': _label2 || null\n        },\n        on: {\n          click: this.onCloseButton\n        }\n      }, _label2));\n    }\n\n    if ($footer.length > 0) {\n      $footer = [h('div', {\n        staticClass: 'b-form-date-controls d-flex flex-wrap',\n        class: {\n          'justify-content-between': $footer.length > 1,\n          'justify-content-end': $footer.length < 2\n        }\n      }, $footer)];\n    }\n\n    var $calendar = h(_calendar.BCalendar, {\n      staticClass: 'b-form-date-calendar w-100',\n      props: _objectSpread(_objectSpread({}, (0, _props2.pluckProps)(calendarProps, $props)), {}, {\n        hidden: !this.isVisible,\n        value: localYMD,\n        valueAsDate: false,\n        width: this.calendarWidth\n      }),\n      on: {\n        selected: this.onSelected,\n        input: this.onInput,\n        context: this.onContext\n      },\n      scopedSlots: (0, _object.pick)($scopedSlots, ['nav-prev-decade', 'nav-prev-year', 'nav-prev-month', 'nav-this-month', 'nav-next-month', 'nav-next-year', 'nav-next-decade']),\n      key: 'calendar',\n      ref: 'calendar'\n    }, $footer);\n    return h(_bvFormBtnLabelControl.BVFormBtnLabelControl, {\n      staticClass: 'b-form-datepicker',\n      props: _objectSpread(_objectSpread({}, (0, _props2.pluckProps)(formBtnLabelControlProps, $props)), {}, {\n        formattedValue: localYMD ? this.formattedValue : '',\n        id: this.safeId(),\n        lang: this.computedLang,\n        menuClass: [{\n          'bg-dark': dark,\n          'text-light': dark\n        }, this.menuClass],\n        placeholder: placeholder,\n        rtl: this.isRTL,\n        value: localYMD\n      }),\n      on: {\n        show: this.onShow,\n        shown: this.onShown,\n        hidden: this.onHidden\n      },\n      scopedSlots: _defineProperty({}, _slots.SLOT_NAME_BUTTON_CONTENT, $scopedSlots[_slots.SLOT_NAME_BUTTON_CONTENT] || this.defaultButtonFn),\n      ref: 'control'\n    }, [$calendar]);\n  }\n});\n\nexports.BFormDatepicker = BFormDatepicker;"},"sourceMaps":null,"error":null,"hash":"141bae4556f34dd77ac58dc5ae32046b","cacheData":{"env":{}}}